@{
    ViewData["Title"] = "排行榜";
    var petLeaderboard = ViewBag.PetLeaderboard as List<GameSpace.Models.Pet>;
    var pointLeaderboard = ViewBag.PointLeaderboard as List<GameSpace.Models.UserWallet>;
}

<div class="container mt-5">
    <h1 class="text-center mb-4">排行榜</h1>

    <div class="row">
        <!-- 寵物等級排行榜 -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">寵物等級排行榜</h5>
                </div>
                <div class="card-body">
                    @if (petLeaderboard?.Any() == true)
                    {
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>排名</th>
                                        <th>寵物名稱</th>
                                        <th>主人</th>
                                        <th>等級</th>
                                        <th>經驗值</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < petLeaderboard.Count; i++)
                                    {
                                        var pet = petLeaderboard[i];
                                        <tr>
                                            <td>
                                                @if (i < 3)
                                                {
                                                    <span class="badge bg-@(i switch { 0 => "warning", 1 => "secondary", 2 => "danger", _ => "light" })">
                                                        @(i + 1)
                                                    </span>
                                                }
                                                else
                                                {
                                                    <span class="badge bg-light text-dark">@(i + 1)</span>
                                                }
                                            </td>
                                            <td>@pet.PetName</td>
                                            <td>@pet.User?.Username</td>
                                            <td>
                                                <span class="badge bg-primary">@pet.Level</span>
                                            </td>
                                            <td>@pet.Experience</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                    else
                    {
                        <p class="text-muted text-center">暫無排行榜數據</p>
                    }
                </div>
            </div>
        </div>

        <!-- 用戶點數排行榜 -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">用戶點數排行榜</h5>
                </div>
                <div class="card-body">
                    @if (pointLeaderboard?.Any() == true)
                    {
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>排名</th>
                                        <th>用戶名</th>
                                        <th>點數</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < pointLeaderboard.Count; i++)
                                    {
                                        var wallet = pointLeaderboard[i];
                                        <tr>
                                            <td>
                                                @if (i < 3)
                                                {
                                                    <span class="badge bg-@(i switch { 0 => "warning", 1 => "secondary", 2 => "danger", _ => "light" })">
                                                        @(i + 1)
                                                    </span>
                                                }
                                                else
                                                {
                                                    <span class="badge bg-light text-dark">@(i + 1)</span>
                                                }
                                            </td>
                                            <td>@wallet.User?.Username</td>
                                            <td>
                                                <span class="text-primary fw-bold">@wallet.UserPoint</span>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                    else
                    {
                        <p class="text-muted text-center">暫無排行榜數據</p>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- 其他排行榜 -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">更多排行榜</h5>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-md-3">
                            <h4 class="text-primary">-</h4>
                            <p class="text-muted">簽到天數</p>
                        </div>
                        <div class="col-md-3">
                            <h4 class="text-success">-</h4>
                            <p class="text-muted">小遊戲勝利</p>
                        </div>
                        <div class="col-md-3">
                            <h4 class="text-warning">-</h4>
                            <p class="text-muted">論壇發文</p>
                        </div>
                        <div class="col-md-3">
                            <h4 class="text-info">-</h4>
                            <p class="text-muted">聊天活躍度</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-12 text-center">
            <a asp-action="Index" class="btn btn-outline-secondary">返回社群</a>
        </div>
    </div>
</div>